<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy 2nd Anniversary!</title>
    <link rel="stylesheet" href="css/home.css">
    <link rel="stylesheet" href="css/general.css">
    <script src="js/music-player.js" defer></script>
    <script src="js/general.js" defer></script>
</head>

<body>

    <nav>
        <div class="hamburger">
            <div class="line"></div>
            <div class="line"></div>
            <div class="line"></div>
        </div>
        <div class="drop">
            <li><a href="home.html">Home</a></li>
            <li><a href="story.html">Days</a></li>
            <li><a href="months.html">Months</a></li>
            <li><a href="fun.html">Albums</a></li>
            <li><a href="surprise.html">???</a></li>

        </div>
    </nav>

    <div class="Section" id="section-1">
        <div class="fullscreen-video-container">
            <video src="home/hero.mp4" controls autoplay></video>
        </div>
    </div>

    <div class="Section" id="section-2">

        <h1>Hymns of our Love</h1>

        <div class="music-containers">
            <div class="music-player-container">
                <div class="music-player">
                    <div class="album-cover">
                        <div class="album-image"><img src="home/1.JPG" alt="Album Cover"></div>
                    </div>
                    <div class="song-info">
                        <h2 class="song-title">Nothings Gonna Stop Us Now</h2>
                        <p class="artist-name">Starship</p>
                    </div>
                    <div class="progress-container">
                        <div class="progress-bar">
                            <div class="progress-indicator"></div>
                        </div>
                    </div>
                    <div class="controls">
                        <button class="control-btn like-btn"><i class="heart-icon">♥</i></button>
                        <button class="control-btn prev-btn"><i class="prev-icon">◀◀</i></button>
                        <button class="control-btn play-btn"><i class="play-icon">▶</i></button>
                        <button class="control-btn next-btn"><i class="next-icon">▶▶</i></button>
                        <button class="control-btn shuffle-btn"><i class="shuffle-icon">⇄</i></button>
                    </div>
                    <audio id="audio-player-1" src="home/Starship - Nothing's Gonna Stop Us Now (Lyrics).mp3"
                        preload="metadata"></audio>
                </div>
            </div>

            <div class="music-player-container">
                <div class="music-player">
                    <div class="album-cover">
                        <div class="album-image"><img src="home/2.JPG" alt="Album Cover"></div>
                    </div>
                    <div class="song-info">
                        <h2 class="song-title">Be With You</h2>
                        <p class="artist-name">The Ridleys</p>
                    </div>
                    <div class="progress-container">
                        <div class="progress-bar">
                            <div class="progress-indicator"></div>
                        </div>
                    </div>
                    <div class="controls">
                        <button class="control-btn like-btn"><i class="heart-icon">♥</i></button>
                        <button class="control-btn prev-btn"><i class="prev-icon">◀◀</i></button>
                        <button class="control-btn play-btn"><i class="play-icon">▶</i></button>
                        <button class="control-btn next-btn"><i class="next-icon">▶▶</i></button>
                        <button class="control-btn shuffle-btn"><i class="shuffle-icon">⇄</i></button>
                    </div>
                    <audio id="audio-player-2" src="home/Be With You.mp3" preload="metadata"></audio>
                </div>
            </div>

            <div class="music-player-container">
                <div class="music-player">
                    <div class="album-cover">
                        <div class="album-image"><img src="home/3.JPG" alt="Album Cover"></div>
                    </div>
                    <div class="song-info">
                        <h2 class="song-title">You'll be in My Heart</h2>
                        <p class="artist-name">NIKI</p>
                    </div>
                    <div class="progress-container">
                        <div class="progress-bar">
                            <div class="progress-indicator"></div>
                        </div>
                    </div>
                    <div class="controls">
                        <button class="control-btn like-btn"><i class="heart-icon">♥</i></button>
                        <button class="control-btn prev-btn"><i class="prev-icon">◀◀</i></button>
                        <button class="control-btn play-btn"><i class="play-icon">▶</i></button>
                        <button class="control-btn next-btn"><i class="next-icon">▶▶</i></button>
                        <button class="control-btn shuffle-btn"><i class="shuffle-icon">⇄</i></button>
                    </div>
                    <audio id="audio-player-2" src="home/NIKI - You'll be in my heart.mp3" preload="metadata"></audio>
                </div>
            </div>

            <div class="music-player-container">
                <div class="music-player">
                    <div class="album-cover">
                        <div class="album-image"><img src="home/4.JPG" alt="Album Cover"></div>
                    </div>
                    <div class="song-info">
                        <h2 class="song-title">Sa Bawat Sandali</h2>
                        <p class="artist-name">Ashtine Olviga</p>
                    </div>
                    <div class="progress-container">
                        <div class="progress-bar">
                            <div class="progress-indicator"></div>
                        </div>
                    </div>
                    <div class="controls">
                        <button class="control-btn like-btn"><i class="heart-icon">♥</i></button>
                        <button class="control-btn prev-btn"><i class="prev-icon">◀◀</i></button>
                        <button class="control-btn play-btn"><i class="play-icon">▶</i></button>
                        <button class="control-btn next-btn"><i class="next-icon">▶▶</i></button>
                        <button class="control-btn shuffle-btn"><i class="shuffle-icon">⇄</i></button>
                    </div>
                    <audio id="audio-player-3" src="home/Sa_Bawat_Sandali.mp3" preload="metadata"></audio>
                </div>
            </div>
        </div>
    </div>

    <div class="Section" id="section-3">
        <div class="content">
            <h1>To My Lovey</h1>
            <div class="letter-content">
                <p>Dear Lovey,</p>
                <p>Hi lovey first and foremost Happy 2nd Anniversary my Love, its been 2 yrs since you gave me the yes I
                    wanted. And now 2 yrs had passed but still, I can't give you the perfect relationship that you've
                    wanted. We've been through a lot together, its been a heck of a ride; But we're still here had lots
                    of ups and downs, misunderstandings, quarrels and a lot more. Yet we choose to stay by each others
                    side, we may not have the perfect relationship, but I can say that we had the perfect story we can
                    tell our kids someday, a story that they can learn from. I'm certain of that because we learned a
                    lot. <br><br>

                    I'm thankful and blessed to have you as my significant other. You've loved me like no one else have
                    ever did, you stayed by my side even tho I'm immature, incompetent and a total scumbag in treating
                    you. I can proudly say that you've been the best gf for these past few years, <br><br>

                    I love you so much my Love, Lovey, Lovelove, Ai, Baby, Bebe, Ashubi. I love you more than words can
                    say. HAPPY 2ND ANNIVERSARY TO US!</p>
                <p class="signature">With love,<br>Jayjay</p>
            </div>
        </div>
    </div>

    <div class="scroll-indicator">
        <div class="dot" data-index="0"></div>
        <div class="dot" data-index="1"></div>
        <div class="dot" data-index="2"></div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const sections = document.querySelectorAll('.Section');
            const dots = document.querySelectorAll('.dot');
            let isScrolling = false;
            let currentSection = 0;

            // Add parallax effect to sections
            function parallaxEffect() {
                const scrollPosition = window.scrollY;

                sections.forEach((section) => {
                    const sectionTop = section.offsetTop;
                    const distance = scrollPosition - sectionTop;

                    if (Math.abs(distance) < window.innerHeight) {
                        // Apply subtle parallax effect to section background
                        section.style.transform = `translateY(${distance * 0.05}px)`;
                    }
                });
            }

            // Set the first dot as active initially and mark first section as in-view
            dots[0].classList.add('active');
            sections[0].classList.add('in-view');

            // Get section titles
            const sectionTitles = ['Vid', 'Music', 'Letter'];
            const currentSectionTitle = document.querySelector('.current-section-title');

            // Function to update active dot, section title, and in-view class based on current section
            function updateActiveDot() {
                const scrollPosition = window.scrollY;

                sections.forEach((section, index) => {
                    const sectionTop = section.offsetTop;
                    const sectionHeight = section.offsetHeight;

                    // Check if section is in view
                    if (scrollPosition >= sectionTop - sectionHeight / 3 &&
                        scrollPosition < sectionTop + sectionHeight - sectionHeight / 3) {
                        // Add in-view class to current section and remove from others
                        sections.forEach(s => s.classList.remove('in-view'));
                        section.classList.add('in-view');

                        if (currentSection !== index) {
                            // Update dots
                            dots.forEach(dot => dot.classList.remove('active'));
                            dots[index].classList.add('active');

                            // Update current section
                            currentSection = index;

                            // Update section title with animation
                            currentSectionTitle.style.opacity = '0';
                            currentSectionTitle.style.transform = 'translateY(-10px)';

                            setTimeout(() => {
                                currentSectionTitle.textContent = sectionTitles[index];
                                currentSectionTitle.style.opacity = '1';
                                currentSectionTitle.style.transform = 'translateY(0)';
                            }, 300);
                        }
                    }
                });
            }

            // Add click event to dots for navigation
            dots.forEach((dot, index) => {
                dot.addEventListener('click', function () {
                    if (!isScrolling) {
                        isScrolling = true;
                        currentSection = index;

                        // Update active dot immediately
                        dots.forEach(d => d.classList.remove('active'));
                        dot.classList.add('active');

                        // Scroll to section smoothly
                        sections[index].scrollIntoView({ behavior: 'smooth' });

                        // Reset scrolling flag after animation completes
                        setTimeout(() => {
                            isScrolling = false;
                        }, 500); // Increased timeout for smooth scrolling
                    }
                });
            });

            // Handle keyboard navigation
            document.addEventListener('keydown', function (e) {
                if (!isScrolling) {
                    if (e.key === 'ArrowDown' || e.key === 'PageDown') {
                        e.preventDefault();
                        if (currentSection < sections.length - 1) {
                            isScrolling = true;
                            currentSection++;
                            dots.forEach(d => d.classList.remove('active'));
                            dots[currentSection].classList.add('active');
                            sections[currentSection].scrollIntoView({ behavior: 'smooth' });
                            setTimeout(() => { isScrolling = false; }, 500); // Increased timeout for smooth scrolling
                        }
                    } else if (e.key === 'ArrowUp' || e.key === 'PageUp') {
                        e.preventDefault();
                        if (currentSection > 0) {
                            isScrolling = true;
                            currentSection--;
                            dots.forEach(d => d.classList.remove('active'));
                            dots[currentSection].classList.add('active');
                            sections[currentSection].scrollIntoView({ behavior: 'smooth' });
                            setTimeout(() => { isScrolling = false; }, 500); // Increased timeout for smooth scrolling
                        }
                    }
                }
            });

            // Handle wheel events for better snap scrolling
            let wheelTimeout;
            window.addEventListener('wheel', function (e) {
                if (!isScrolling) {
                    clearTimeout(wheelTimeout);
                    wheelTimeout = setTimeout(function () {
                        if (e.deltaY > 0 && currentSection < sections.length - 1) {
                            isScrolling = true;
                            currentSection++;
                            dots.forEach(d => d.classList.remove('active'));
                            dots[currentSection].classList.add('active');
                            sections[currentSection].scrollIntoView({ behavior: 'smooth' });
                            setTimeout(() => { isScrolling = false; }, 500); // Increased timeout for smooth scrolling
                        } else if (e.deltaY < 0 && currentSection > 0) {
                            isScrolling = true;
                            currentSection--;
                            dots.forEach(d => d.classList.remove('active'));
                            dots[currentSection].classList.add('active');
                            sections[currentSection].scrollIntoView({ behavior: 'smooth' });
                            setTimeout(() => { isScrolling = false; }, 500); // Increased timeout for smooth scrolling
                        }
                    }, 50);
                }
            }, { passive: false });

            // Update active dot and progress indicator on scroll with requestAnimationFrame for better performance
            let ticking = false;
            window.addEventListener('scroll', function () {
                if (!ticking) {
                    window.requestAnimationFrame(function () {
                        updateActiveDot();
                        parallaxEffect(); // Apply parallax effect

                        // Update progress indicator
                        const scrollPosition = window.scrollY;
                        const totalHeight = document.body.scrollHeight - window.innerHeight;
                        const progress = (scrollPosition / totalHeight) * 100;
                        document.body.style.setProperty('--scroll-progress', progress + '%');

                        // Update the progress bar width
                        document.documentElement.style.setProperty('--progress-width', progress + '%');
                        document.body.style.setProperty('--progress-width', progress + '%');

                        ticking = false;
                    });
                    ticking = true;
                }
            });

            // Initial update
            updateActiveDot();

            // Add CSS variable for progress bar
            document.documentElement.style.setProperty('--progress-width', '0%');

            // Apply the CSS variable to the progress bar and add custom scroll behavior
            const styleSheet = document.createElement('style');
            styleSheet.textContent = `
                body::before {
                    width: var(--progress-width, 0%);
                }
                
                /* Custom scroll behavior with cubic-bezier for smoother transitions */
                html {
                    scroll-behavior: smooth;
                    scroll-behavior-timing-function: cubic-bezier(0.5, 0, 0.1, 1);
                }
            `;
            document.head.appendChild(styleSheet);
        });
    </script>
</body>

</html>